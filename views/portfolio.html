<!DOCTYPE html>
<html lang='en' ng-app>

<head>
	<title>Kim Greenough</title>

	<!-- STYLES -->
	<link rel='stylesheet' type='text/css' href='../styles/portfolio.css' />
	<link rel='stylesheet' type='text/css' href='../styles/templateComponents.css' />

	<!-- FONT -->
	<link href='http://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>

	<!-- SCRIPTS -->
	<!-- jQuery for bootstrap and minor animations -->
	<script src="../bower_components/jquery/dist/jquery.min.js"></script>
	<!-- Javascript for bootstrap -->
	<script src="../bower_components/angular/angular.min.js"></script>
	<script src="../controllers/portfolioController.js"></script>
</head>

<body>
	<div ng-controller='portfolioController'>

		<!-- Content display -->
		<div ng-include="activeGalleryTemplate" ng-mouseenter='retractThumbs();'></div>

		<!-- User controls -->
		<div id='gallery-flyout' ng-click='retractThumbs();'>
			<!--div id='gallery-title'>{{ galleryTitle }}<span id='gallery-close-button' ></span></div-->
			<div id='thumb-container'>
				<div class='gallery-thumb' ng-click='scrollToMe($index);' ng-repeat="thumb in sectionInfo[activeCategory]['quickThumbs']">
					<img src = "{{ thumb }}" ></img>
				</div>
			</div>
		</div>
		
		<div id='mainNav' ng-mouseenter='expandThumbs()'>
			<div id='header'>
				<img src=" {{ activeHeaderImage }} "></img>
			</div>
			<div id='content-links'>
				<a href='../index.html'>HOME</a>
				<div id='contactButton'><span class='linkHeaderText' ng-class="{ 'activeLink': activeCategory == 'contact' }" ng-click="loadGallery('contact'); hideThumbs();">CONTACT</span>
				<p></p>
				
				<!-- Some ass jack hackery fack right huurr. Set default hight to indicate default active category -->
				<div class='linkHeaderContainer' style="height:101px"><span class='linkHeaderText' ng-click='expandCategory(0, "Characters");'>CHARACTERS</span>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'characters_projects' }" ng-mouseenter="showPreview('characters_projects');" ng-mouseleave="hidePreview();" ng-click="loadGallery('characters_projects');">Projects</div>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'characters_illustrations' }" ng-mouseenter="showPreview('characters_illustrations');" ng-mouseleave="hidePreview();" ng-click="loadGallery('characters_illustration');">Illustrations</div>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'characters_sketches' }" ng-mouseenter="showPreview('characters_sketches'');" ng-mouseleave="hidePreview();" ng-click="loadGallery('characters_sketches');">Sketches</div>
				</div>
				<div class='linkHeaderContainer'><span class='linkHeaderText' ng-click='expandCategory(1, "Environment");'>ENVIRONMENTS</span>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'environments_projects' }" ng-mouseenter="showPreview('environments_projects');" ng-mouseleave="hidePreview();" ng-click="loadGallery('environments_projects');">Projects</div>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'environments_illustrations' }" ng-mouseenter="showPreview('environments_illustration');" ng-mouseleave="hidePreview();" ng-click="loadGallery('environments_illustration');">Illustration</div>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'environments_sketches' }" ng-mouseenter="showPreview('environments_sketches');" ng-mouseleave="hidePreview()" ng-click="loadGallery('environments_sketches');">Sketches</div>
				</div>
				<div class='linkHeaderContainer'><span class='linkHeaderText' ng-click='expandCategory(2, "Other");'>OTHER</span>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'other_digital' }" ng-mouseenter="showPreview('other_digital');" ng-mouseleave="hidePreview();" ng-click="loadGallery('other_digital');">Digital</div>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'other_traditional' }" ng-mouseenter="showPreview('other_traditional');" ng-mouseleave="hidePreview();" ng-click="loadGallery('other_traditional');">Traditional</div>
					<div class='listItem' ng-class="{ 'activeLink': activeCategory == 'other_inktober' }" ng-mouseenter="showPreview('other_inktober');" ng-mouseleave="hidePreview();" ng-click="loadGallery('other_inktober');">Inktober</div>
				</div>				
			</div>
		</div>
	</div>
</body>

<!-- Resize the gallery width anytime the page loads or window is resized. This is also done in portfolioController::ChangeTemplate()-->
	<script>
		var numberOfImagesPrevious = 0;
		
		// Resize the gallery to fit all images as they load.
		var resizeGallery = function(){
			var $images = $(".template-image-restrict");
			var numberOfImagesCurrent = $images.length;
			var totalWidth = 0;

			for(var i = 0; i < $images.length; ++i){
				var marginLeft = $images.eq(i).css("margin-left");
				var marginRight = $images.eq(i).css("margin-right");

				totalWidth += $images.eq(i).width() + parseInt(marginLeft.substring(0, marginLeft.length - 2)) + parseInt(marginRight.substring(0, marginRight.length - 2));
				totalWidth += 6;
			}
			
			if (numberOfImagesCurrent > numberOfImagesPrevious && 
				numberOfImagesCurrent > 0){
					
				numberOfImagesPrevious = numberOfImagesCurrent;
				return false;
			}

			$(".template-container").css("width", totalWidth + "px");
			
			return true;
		};

		// Resize the gallery every x milliseconds (for new images loaded).
		var resizeGalleryAsync = function(interval){
			var resizeGalleryInterval = setInterval(function() {
				if(resizeGallery() === true){
			    	clearInterval(resizeGalleryInterval);
				}
			}, interval);
		};
		
		// Resize the gallery on page load.
		resizeGalleryAsync(100);
		resizeGalleryAsync(500);
		resizeGalleryAsync(2000);
		resizeGalleryAsync(5000);

		// Resize the gallery when the window is resized.
		$( window ).resize(function() {
			resizeGalleryAsync(100);
			resizeGalleryAsync(500);
			resizeGalleryAsync(2000);
			resizeGalleryAsync(5000);
			
			console.log("window resized");
		});
	</script>

</html>