<!DOCTYPE html>
<html lang='en' ng-app>

<head>
	<title>Kim Greenough</title>

	<!-- STYLES -->
	<link rel='stylesheet' type='text/css' href='../styles/portfolio.css' />
	<link rel='stylesheet' type='text/css' href='../styles/templateComponents.css' />

	<!-- FONT -->
	<link href='http://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>

	<!-- SCRIPTS -->
	<!-- jQuery for bootstrap and minor animations -->
	<script src="../bower_components/jquery/dist/jquery.min.js"></script>
	<!-- Javascript for bootstrap -->
	<script src="../bower_components/angular/angular.min.js"></script>
	<script src="../controllers/portfolioController.js"></script>
	
	<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js?ver=1.3.2'></script>
	<script type='text/javascript' src='/js/jquery.mousewheel.min.js'></script>
</head>

<body>
	<div ng-controller='portfolioController'>

		<!-- Content display -->
		<div ng-include="activeGalleryTemplate" ng-mouseenter='retractThumbs();'></div>

		<!-- User controls -->
		<div id='gallery-flyout' ng-click='retractThumbs();'>
			<div id='thumb-container'>
				<div class='gallery-thumb' ng-click='slideTo($index);' ng-repeat="thumb in activeThumbs">
					<img src = "{{ thumb }}" ></img>
				</div>
			</div>
		</div>
		
		<div id='mainNav' ng-mouseenter='expandThumbs()'>
			<div id='header'>
				<img src=" {{ activeHeaderImage }} "></img>
			</div>
			<div id='content-links'>
				<a href='../index.html'>HOME</a>
				<div id='contactButton'><span class='linkHeaderText' ng-class="{activeLink: activeCategory == 'contact' }" ng-click="loadGallery('contact'); hideThumbs();">CONTACT</span>
				<p></p>
				
				<div class='linkHeaderContainer' style="height:75px"><span class='linkHeaderText' ng-click='expandCategory(0);'>CHARACTERS</span>
					<div class='listItem' ng-class="{activeLink: activeCategory == 'characters_concept'}" ng-mouseenter="showPreview('characters_concept');" ng-mouseleave="hidePreview();" ng-click="loadGallery('characters_concept');">Concept</div>
					<div class='listItem' ng-class="{activeLink: activeCategory == 'characters_studies'}" ng-mouseenter="showPreview('characters_studies');" ng-mouseleave="hidePreview();" ng-click="loadGallery('characters_studies');">Studies</div>
				</div>
				<div class='linkHeaderContainer'><span class='linkHeaderText' ng-click='expandCategory(1);'>ENVIRONMENTS</span>
					<div class='listItem' ng-class="{activeLink: activeCategory == 'environments_illustrations'}" ng-mouseenter="showPreview('environments_illustrations');" ng-mouseleave="hidePreview();" ng-click="loadGallery('environments_illustrations');">Illustration</div>
					<div class='listItem' ng-class="{activeLink: activeCategory == 'environments_studies'}" ng-mouseenter="showPreview('environments_studies');" ng-mouseleave="hidePreview()" ng-click="loadGallery('environments_studies');">Studies</div>
				</div>
				<div class='linkHeaderContainer'><span class='linkHeaderText' ng-click='expandCategory(2);'>OTHER</span>
					<div class='listItem' ng-class="{activeLink: activeCategory == 'other_fanart'}" ng-mouseenter="showPreview('other_fanart');" ng-mouseleave="hidePreview();" ng-click="loadGallery('other_fanart');">Fan Art</div>
				</div>				
			</div>
		</div>
	</div>
</body>

<!-- Resize the gallery width anytime the page loads or window is resized. This is also done in portfolioController::ChangeTemplate()-->
	<script>
		var numberOfImagesPrevious = 0;
		
		// Resize the gallery to fit all images as they load.
		var resizeGallery = function(){
			var $images = $(".template-image-restrict");
			var numberOfImagesCurrent = $images.length;
			var totalWidth = 0;

			for(var i = 0; i < $images.length; ++i){
				var marginLeft = $images.eq(i).css("margin-left");
				var marginRight = $images.eq(i).css("margin-right");

				totalWidth += $images.eq(i).width() + parseInt(marginLeft.substring(0, marginLeft.length - 2)) + parseInt(marginRight.substring(0, marginRight.length - 2));
				totalWidth += 6;
			}
			
			if (numberOfImagesCurrent > numberOfImagesPrevious && 
				numberOfImagesCurrent > 0){
					
				numberOfImagesPrevious = numberOfImagesCurrent;
				return false;
			}

			$(".template-container").css("width", totalWidth + "px");
			
			return true;
		};

		// Resize the gallery every x milliseconds (for new images loaded).
		var resizeGalleryAsync = function(interval){
			var resizeGalleryInterval = setInterval(function() {
				if(resizeGallery() === true){
			    	clearInterval(resizeGalleryInterval);
				}
			}, interval);
		};
		
		// Resize the gallery on page load.
		resizeGalleryAsync(100);
		resizeGalleryAsync(500);
		resizeGalleryAsync(2000);
		resizeGalleryAsync(5000);

		// Resize the gallery when the window is resized.
		$( window ).resize(function() {
			resizeGalleryAsync(100);
			resizeGalleryAsync(500);
			resizeGalleryAsync(2000);
			resizeGalleryAsync(5000);
			
			console.log("window resized");
		});
		
		$(function() {

		$("screen-container").mousewheel(function(event, delta) {
		
			this.scrollLeft -= (delta * 30);
			
			event.preventDefault();
		
		});
		
		});
	</script>

</html>